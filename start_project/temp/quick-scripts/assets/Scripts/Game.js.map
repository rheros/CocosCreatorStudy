{"version":3,"sources":["Game.js"],"names":["cc","Class","extends","Component","properties","starPrefab","default","type","Prefab","maxStarDuration","minStarDuration","ground","Node","player","scoreDisplay","Label","scoreAudio","url","AudioClip","playButton","Button","onLoad","starDuration","score","playerC","getComponent","half","node","width","isdead","active","groundY","y","height","play","spawnNewStar","runAction","jumpAction","test","console","debug","log","random0To1","newStar","instantiate","game","addChild","setPosition","getNewStarPosition","randY","jumpHeight","maxX","randX","randomMinus1To1","p","gameOver","stopAllActions","destroy","gainScore","string","toString","audioEngine","playEffect"],"mappings":"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","file":"Game.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\t\r\n    properties: {\r\n        starPrefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        maxStarDuration: 0,\r\n        minStarDuration: 0,\r\n        ground: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        player: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        scoreDisplay: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        scoreAudio: {\r\n            default: null,\r\n            url: cc.AudioClip\r\n        },\r\n        playButton: {\r\n            default: null,\r\n            type: cc.Button\r\n        }\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n    onLoad() {\r\n        this.starDuration = 0;\r\n        this.score = 0;\r\n\r\n        this.playerC = this.player.getComponent(\"Player\")\r\n        this.playerC.half = this.node.width / 2\r\n        this.playerC.isdead=true\r\n        this.playButton.node.active = true;\r\n        this.groundY = this.ground.y + this.ground.height / 2;\r\n    },\r\n    play() {\r\n        this.playerC.isdead = false\r\n        this.playButton.node.active = false;\r\n        this.spawnNewStar();\r\n        this.playerC.node.runAction(this.playerC.jumpAction);\r\n    },\r\n    test(){\r\n        console.debug(\"fuck in debug\");\r\n        console.log(\"fuck in log\")\r\n    },\r\n    spawnNewStar: function() {\r\n        this.starDuration = this.minStarDuration + cc.random0To1() * (this.maxStarDuration - this.minStarDuration);\r\n        this.newStar = cc.instantiate(this.starPrefab);\r\n        this.newStar.getComponent('Star').game = this;\r\n        this.node.addChild(this.newStar)\r\n        this.newStar.setPosition(this.getNewStarPosition())\r\n    },\r\n\r\n    getNewStarPosition: function() {\r\n\r\n        var randY = this.groundY + cc.random0To1() * this.player.getComponent(\"Player\").jumpHeight + 50;\r\n        var maxX = this.node.width / 2;\r\n        var randX = cc.randomMinus1To1() * maxX;\r\n        return cc.p(randX, randY)\r\n    },\r\n    // start() {\r\n\r\n    // },\r\n\r\n    gameOver: function() {\r\n        console.log(\"call gameover\")\r\n        this.player.stopAllActions(); //停止 player 节点的跳跃动作\r\n        this.playerC.isdead = true;\r\n        this.playButton.node.active = true;\r\n        this.playerC.node.y = -152\r\n        if (this.newStar.node) {\r\n            this.newStar.node.destroy();\r\n        }\r\n        //cc.director.loadScene('game');\r\n    },\r\n    gainScore: function() {\r\n        this.score += 1;\r\n        // 更新 scoreDisplay Label 的文字\r\n        this.scoreDisplay.string = 'Score: ' + this.score.toString();\r\n        cc.audioEngine.playEffect(this.scoreAudio, false);\r\n    },\r\n});"]}